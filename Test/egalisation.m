dirac = zeros(1,512);
x = linspace(-pi/2, pi/2, 512) ;
y = sin(x) ;
dirac(1) = 1;
y_freq = fft(dirac);
H = channel_filter(1000, 0);
%h = ifft(H);
%h = [h(2:257) h(259:514)];
%filtered = conv(h, y);
%filtered = filtered(258:769);
filtered = y_freq.*[H(2:257) H(259:514)];
%H_inverse = [0 1./H(2:257) 0 1./H(259:514)];
%H_inverse = 1./H;
%H_inverse = ones(1, 512)./[H(2:257) H(259:514)];
%sig_freq = fft(filtered);
unfiltered_freq = filtered./[H(2:257) H(259:514)];
unfiltered = ifft(unfiltered_freq);
%Erreur = H_inverse.*[H(2:257) H(259:514)];
%h_inverse = ifft(H_inverse);
%Erreur2 = filter(h, 1, h_inverse);
%h_inverse = [h_inverse(2:257) h_inverse(259:514)];
%unfiltered = conv(h_inverse, filtered, 'same'); 